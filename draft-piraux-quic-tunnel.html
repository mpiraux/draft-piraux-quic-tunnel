<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Tunneling Internet protocols inside QUIC</title>

  
<style type="text/css">/*<![CDATA[*/

body {
  font: 16px "Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 24px;
  margin: 75px auto;
  max-width: 624px;
  padding: 0 5px;
}

.title, .filename, h1, h2, h3, h4, h5 {
  font: 16px "Roboto Condensed","Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  font-size-adjust: 0.5;
  font-weight: bold;
  color: #333;
  line-height: 100%;
  margin: 1.2em 0 0.3em;
}
.title, #rfc\.title h1 { font-size: 32px; }
h1, section h1, h2, section h2, section h3, nav h2 { font-size: 20px; }
h3, section h4, h4, section h5 { font-size: 16px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header, table#rfc\.headerblock {
  width: 100%;
}
table.header td, table#rfc\.headerblock td {
  border: none;
  background-color: transparent;
  color: black;
  padding: 0;
}
.filename {
  display: block;
  color: rgb(119, 119, 119);
  font-size: 20px;
  font-weight: normal;
  line-height: 100%;
  margin: 10px 0 32px;
}
#rfc\.abstract+p, #rfc\.abstract+p code, #rfc\.abstract+p samp, #rfc\.abstract+p tt {
  font-size: 20px;
  line-height: 28px;
}

samp, tt, code, pre, span.tt {
  font-size: 13.5px;
  font-family: Consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure, caption {
  font-style: italic;
  margin: 0 1.5em;
  text-align: left;
}

address {
  margin: 16px 2px;
  line-height: 20px;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn, address b {
  font-weight: normal;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}
hr.noprint {
  display: none;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

p, ol, ul, li {
  padding: 0;
}
p {
  margin: 0.5em 0;
}
ol, ul {
  margin: 0.2em 0 0.2em 2em;
}
li {
  margin: 0.2em 0;
}
address {
  font-style: normal;
}

ul.toc ul {
  margin: 0 0 0 2em;
}
ul.toc li {
  list-style: none;
  margin: 0;
}

@media screen and (min-width: 924px) {
  body {
    padding-right: 350px;
  }
  body>ul.toc, body>#rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    z-index: 1;
    overflow: auto;
    overscroll-behavior: contain;
  }
  body>#rfc\.toc {
    top: 55px;
  }
  body>ul.toc {
    top: 100px;
  }

  ul.toc {
    margin: 0 0 0 4px;
    font-size: 12px;
    line-height: 20px;
  }
  ul.toc ul {
    margin-left: 1.2em;
  }
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
  /*]]>*/</style>
  <meta name="viewport" content="initial-scale=1.0">


  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions and Definitions">
<link href="#rfc.section.3" rel="Chapter" title="3 Reference environment">
<link href="#rfc.section.4" rel="Chapter" title="4 The tunnel mode">
<link href="#rfc.section.5" rel="Chapter" title="5 Connection establishment">
<link href="#rfc.section.6" rel="Chapter" title="6 Reporting access networks availability">
<link href="#rfc.section.7" rel="Chapter" title="7 Messages format">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 QUIC tunnel control TLVs">
<link href="#rfc.section.7.1.1" rel="Chapter" title="7.1.1 Access Report TLV">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Privacy">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Ingress Filtering">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 Registration of QUIC tunnel Identification String">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 QUIC tunnel control TLVs">
<link href="#rfc.section.9.2.1" rel="Chapter" title="9.2.1 QUIC tunnel control TLVs Types">
<link href="#rfc.section.9.3" rel="Chapter" title="9.3 QUIC tunnel Access Report Signal Codes">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.appendix.A" rel="Chapter" title="A Change Log">
<link href="#rfc.appendix.A.1" rel="Chapter" title="A.1 Since draft-piraux-quic-tunnel-03">
<link href="#rfc.appendix.A.2" rel="Chapter" title="A.2 Since draft-piraux-quic-tunnel-02">
<link href="#rfc.appendix.A.3" rel="Chapter" title="A.3 Since draft-piraux-quic-tunnel-01">
<link href="#rfc.appendix.A.4" rel="Chapter" title="A.4 Since draft-piraux-quic-tunnel-00">
<link href="#rfc.acknowledgments" rel="Chapter">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.26.0 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Piraux, M., Bonaventure, O., and A. Masputra" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-piraux-quic-tunnel-04" />
  <meta name="dct.issued" scheme="ISO8601" content="2020-10-28" />
  <meta name="dct.abstract" content="This document specifies methods for tunneling Ethernet frames and Internet protocols such as TCP, UDP, IP and QUIC inside a QUIC connection." />
  <meta name="description" content="This document specifies methods for tunneling Ethernet frames and Internet protocols such as TCP, UDP, IP and QUIC inside a QUIC connection." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">QUIC Working Group</td>
<td class="right">M. Piraux</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">O. Bonaventure</td>
</tr>
<tr>
<td class="left">Intended status: Experimental</td>
<td class="right">UCLouvain</td>
</tr>
<tr>
<td class="left">Expires: May 1, 2021</td>
<td class="right">A. Masputra</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Apple Inc.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 28, 2020</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Tunneling Internet protocols inside QUIC<br />
  <span class="filename">draft-piraux-quic-tunnel-04</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document specifies methods for tunneling Ethernet frames and Internet protocols such as TCP, UDP, IP and QUIC inside a QUIC connection.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 1, 2021.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2020 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions and Definitions</a>
</li>
<li>3.   <a href="#rfc.section.3">Reference environment</a>
</li>
<li>4.   <a href="#rfc.section.4">The tunnel mode</a>
</li>
<li>5.   <a href="#rfc.section.5">Connection establishment</a>
</li>
<li>6.   <a href="#rfc.section.6">Reporting access networks availability</a>
</li>
<li>7.   <a href="#rfc.section.7">Messages format</a>
</li>
<ul><li>7.1.   <a href="#rfc.section.7.1">QUIC tunnel control TLVs</a>
</li>
<ul><li>7.1.1.   <a href="#rfc.section.7.1.1">Access Report TLV</a>
</li>
</ul></ul><li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<ul><li>8.1.   <a href="#rfc.section.8.1">Privacy</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Ingress Filtering</a>
</li>
</ul><li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<ul><li>9.1.   <a href="#rfc.section.9.1">Registration of QUIC tunnel Identification String</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">QUIC tunnel control TLVs</a>
</li>
<ul><li>9.2.1.   <a href="#rfc.section.9.2.1">QUIC tunnel control TLVs Types</a>
</li>
</ul><li>9.3.   <a href="#rfc.section.9.3">QUIC tunnel Access Report Signal Codes</a>
</li>
</ul><li>10.   <a href="#rfc.references">References</a>
</li>
<ul><li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li>Appendix A.   <a href="#rfc.appendix.A">Change Log</a>
</li>
<ul><li>A.1.   <a href="#rfc.appendix.A.1">Since draft-piraux-quic-tunnel-03</a>
</li>
<li>A.2.   <a href="#rfc.appendix.A.2">Since draft-piraux-quic-tunnel-02</a>
</li>
<li>A.3.   <a href="#rfc.appendix.A.3">Since draft-piraux-quic-tunnel-01</a>
</li>
<li>A.4.   <a href="#rfc.appendix.A.4">Since draft-piraux-quic-tunnel-00</a>
</li>
</ul><li><a href="#rfc.acknowledgments">Acknowledgments</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Mobile devices such as laptops, smartphones or tablets have different requirements than the traditional fixed devices. These mobile devices often change their network attachment. They are often attached to trusted networks, but sometimes they need to be connected to untrusted networks where their communications can be eavesdropped, filtered or modified. In these situations, the classical approach is to rely on VPN protocols such as DTLS or IPSec. These VPN protocols provide the encryption and authentication functions to protect those mobile clients from malicious behaviors in untrusted networks.</p>
<p id="rfc.section.1.p.2">However, some networks have deployed filters that block these VPN protocols. When faced with such filters, users can either switch off their connection or find alternatives, e.g. by using TLS to access some services over TCP port 443. The planned deployment of QUIC <a href="#I-D.ietf-quic-transport" class="xref">[I-D.ietf-quic-transport]</a> <a href="#I-D.ietf-quic-tls" class="xref">[I-D.ietf-quic-tls]</a> opens a new opportunity for such users. Since QUIC will be used to access web sites, it should be less affected by filters than VPN solutions such as IPSec or DTLS. Furthermore, the flexibility of QUIC makes it possible to easily extend the protocol to support VPN services.</p>
<p id="rfc.section.1.p.3">This document explores how QUIC could be used to enable devices to communicate securely in untrusted networks. The QUIC protocol opens up a new way to find a clean solution to this problem. First, QUIC includes the same encryption and authentication techniques as deployed VPN protocols. Second, QUIC is intended to be widely used to support web-based services, making it unlikely to be filtered in many networks, in contrast with VPN protocols. Third, the QUIC migration mechanism enables handovers between several network interfaces.</p>
<p id="rfc.section.1.p.4">This document is organized as follows.  <a href="#reference-environment" class="xref">Section 3</a> describes our reference environment. Then, we propose a first mode of operation, explained in <a href="#the-tunnel-mode" class="xref">Section 4</a>, that use the recently proposed datagram extension (<a href="#I-D.pauly-quic-datagram" class="xref">[I-D.pauly-quic-datagram]</a>) for QUIC to transport plain packets over a QUIC connection. <a href="#connection-establishment" class="xref">Section 5</a> specifies how a connection is established in this document proposal. <a href="#messages-format" class="xref">Section 7</a> details the format of the messages introduced by this document.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#conventions-and-definitions" id="conventions-and-definitions">Conventions and Definitions</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <a href="#RFC2119" class="xref">[RFC2119]</a> <a href="#RFC8174" class="xref">[RFC8174]</a> when, and only when, they appear in all capitals, as shown here.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#reference-environment" id="reference-environment">Reference environment</a>
</h1>
<p id="rfc.section.3.p.1">The reference scenario is a client that uses a QUIC tunnel to send all its packets to a concentrator. The concentrator processes the packets received from the client over the QUIC connection and forwards them to their final destination.  It also receives the packets destined to the client and tunnels them through the QUIC connection.</p>
<div id="rfc.figure.1"></div>
<div id="fig-simple-environment"></div>
<pre>
                                                       +-------------+
+--------+              +--------------+               | Final       |
| Client |              | Concentrator |&lt;===\ ... \===&gt;| destination |
+--------+              +--------------+               | server      |
       ^    +---------+    ^                           +-------------+
       |    | Access  |    |            Legend:
       .----| network |----.              --- QUIC connection
            +---------+                   === TCP/UDP flow
</pre>
<p class="figure">Figure 1: A client attached to a concentrator</p>
<p id="rfc.section.3.p.2">In a nutshell, the solution proposed in this document works as follows. The client opens a QUIC connection to a concentrator. The concentrator authenticates the client through means that are outside the scope of this document such as client certificates, usernames/passwords, OAuth, &#8230; If the authentication succeeds, the client can use the tunnel to exchange any types of packets with the concentrator over the QUIC session.</p>
<p id="rfc.section.3.p.3">The client can send any packets via the concentrator by tunneling them through the concentrator. The concentrator captures the packets destined to the client and tunnels them over the QUIC connection.  Our solution is intended to provide a similar service as the one provided by IPSec tunnels or DTLS. This document leaves address assignment mechanisms out of scope, deployments can rely on out-of-band configurations for that purpose.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#the-tunnel-mode" id="the-tunnel-mode">The tunnel mode</a>
</h1>
<p id="rfc.section.4.p.1">The tunnel mode of operation leverages the recently proposed QUIC datagram extension <a href="#I-D.pauly-quic-datagram" class="xref">[I-D.pauly-quic-datagram]</a>. In a nutshell, to send a packet to a remote host, the client simply encapsulates the entire packet inside a QUIC DATAGRAM frame sent over the QUIC connection established with the concentrator.</p>
<p id="rfc.section.4.p.2">The frame transmission is subject to congestion control, but the frame that contains the packet is not retransmitted in case of loss as specified in <a href="#I-D.pauly-quic-datagram" class="xref">[I-D.pauly-quic-datagram]</a>.</p>
<p id="rfc.section.4.p.3">This mode adds a minimal byte overhead for packet encapsulation in QUIC. It does not define ways of indicating the protocol of the conveyed packets, which can be useful in deployments for which out-of-band signaling may be used.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#connection-establishment" id="connection-establishment">Connection establishment</a>
</h1>
<p id="rfc.section.5.p.1">During QUIC connection establishment, the "tunnel mode" of operation support is indicated by setting the ALPN token "qt" in the TLS handshake. Draft-version implementations MAY specify a particular draft version by suffixing the token, e.g. "qt-00" refers to the first version of this document.</p>
<p id="rfc.section.5.p.2">After the QUIC connection is established, the client can start using the datagram or the stream mode. The client may use PCP <a href="#RFC6887" class="xref">[RFC6887]</a> to request the concentrator to accept inbound connections on their behalf. After the negotiation of such port mappings, the concentrator can start sending packets containing inbound connections in QUIC DATAGRAM frame.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#reporting-access-networks-availability" id="reporting-access-networks-availability">Reporting access networks availability</a>
</h1>
<p id="rfc.section.6.p.1">When the access network is unstable or its performance is degrading, for instance due to signal loss, being able to report its availability to the concentrator can help reduce the amount of packets sent over unstable or unavailable paths.  It can also resume quickly the sending of packets over a previously unavailable access network.</p>
<p id="rfc.section.6.p.2">To do so, we define in <a href="#messages-format" class="xref">Section 7</a> a message called Access Report TLV.  The message can be sent by the client to the concentrator. It identifies the type of access network reported and its associated status. This message is sent over the QUIC connection in a separate unidirectional stream.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#messages-format" id="messages-format">Messages format</a>
</h1>
<p id="rfc.section.7.p.1">In the following sections, we specify the format of each message introduced in this document. The messages are encoded as TLVs, i.e. (Type, Length, Value) tuples, as illustrated in <a href="#tlv" class="xref">Figure 2</a>. All TLV fields are encoded in network-byte order.</p>
<div id="rfc.figure.2"></div>
<div id="tlv"></div>
<pre>
                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Type (8)   |   Length (8)  |          [Value (*)]        ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Figure 2: QUIC tunnel TLV Format</p>
<p id="rfc.section.7.p.2">The Type field is encoded as a byte and identifies the type of the TLV. The Length field is encoded as a byte and indicate the length in bytes of the Value field.  A value of zero indicates that no Value field is present. The Value field is a type-specific value whose length is determined by the Length field.</p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> <a href="#sec-session-format" id="sec-session-format">QUIC tunnel control TLVs</a>
</h1>
<p id="rfc.section.7.1.p.1">This document specifies the following QUIC tunnel control TLVs:</p>
<div id="rfc.figure.3"></div>
<div id="control-tlvs"></div>
<pre>
+------+----------+--------+------+-------------------+
| Type |     Size | Sender | Mode | Name              |
+------+----------+--------+------+-------------------+
| 0x00 |  4 bytes | Client |  all | Access Report TLV |
+------+----------+--------+------+-------------------+
</pre>
<p class="figure">Figure 3: QUIC tunnel control TLVs</p>
<p id="rfc.section.7.1.p.2">The Access Report TLV is sent by the client to periodically report on access networks availability. Each Access Report TLV MUST be sent on a separate unidirectional stream. The stream FIN bit MUST be set following the end of the TLV.</p>
<h1 id="rfc.section.7.1.1">
<a href="#rfc.section.7.1.1">7.1.1.</a> <a href="#access-report-tlv" id="access-report-tlv">Access Report TLV</a>
</h1>
<div id="rfc.figure.4"></div>
<div id="access-tlv"></div>
<pre>
                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Type = 0x00  | Length = 0x02 | AI (4)| R (4) |   Signal (8)  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p class="figure">Figure 4: Access Report TLV</p>
<p id="rfc.section.7.1.1.p.1">The Access Report TLV contains the following:</p>
<p></p>

<ul><li>AI (Access ID) - a four-bit-long field that identifies the access network, e.g., 3GPP (Radio Access Technologies specified by 3GPP) or Non-3GPP (accesses that are not specified by 3GPP) <a href="#TS23501" class="xref">[TS23501]</a>.  The value is one of those listed below (all other values are invalid and the TLV that contains it MUST be discarded):</li></ul>
<pre>
+-----------+-----------------------+
| Access ID | Description           |
+-----------+-----------------------+
|      1    | 3GPP Network          |
|      2    | Non-3GPP Network      |
+-----------+-----------------------+
</pre>
<p></p>

<ul>
<li>R (Reserved) - a four-bit-long field that MUST be zeroed on transmission and ignored on receipt.</li>
<li>Signal - a one-octet-long field that identifies the report signal, e.g., available or unavailable.  The value is supplied to the QUIC tunnel through some mechanism that is outside the scope of this document.  The value is one of those listed in <a href="#quic-tunnel-access-report-signal-codes" class="xref">Section 9.3</a>.</li>
</ul>
<p id="rfc.section.7.1.1.p.4">The client that includes the Access Report TLV sets the value of the Access ID field according to the type of access network it reports on.  Also, the client sets the value of the Signal field to reflect the operational state of the access network.  The mechanism to determine the state of the access network is outside the scope of this specification.</p>
<p id="rfc.section.7.1.1.p.5">The client MUST be able to cancel the sending of an Access Report TLV that is pending delivery, i.e. by resetting its corresponding unidirectional stream.  This can be used when the information contained in the TLV is no longer relevant, e.g. the access network availability has changed. The time of canceling is based on local policies and network environment.</p>
<p id="rfc.section.7.1.1.p.6">Reporting the unavailability of an access network to the concentrator can serve as an indication to stop sending packets over this network while maintaining the QUIC tunnel connection. Upon reporting of the availability of this network, the concentrator can quickly resume sending packets over this network.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a>
</h1>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#privacy" id="privacy">Privacy</a>
</h1>
<p id="rfc.section.8.1.p.1">The Concentrator has access to all the packets it processes. It MUST be protected as a core IP router, e.g. as specified in <a href="#RFC1812" class="xref">[RFC1812]</a>.</p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> <a href="#ingress-filtering" id="ingress-filtering">Ingress Filtering</a>
</h1>
<p id="rfc.section.8.2.p.1">Ingress filtering policies MUST be enforced at the network boundaries, i.e. as specified in <a href="#RFC2827" class="xref">[RFC2827]</a>.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a>
</h1>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> <a href="#registration-of-quic-tunnel-identification-string" id="registration-of-quic-tunnel-identification-string">Registration of QUIC tunnel Identification String</a>
</h1>
<p id="rfc.section.9.1.p.1">This document creates two new registrations for the identification of the QUIC tunnel protocol in the "Application Layer Protocol Negotiation (ALPN) Protocol IDs" registry established in <a href="#RFC7301" class="xref">[RFC7301]</a>.</p>
<p id="rfc.section.9.1.p.2">The "qt" string identifies the QUIC tunnel protocol datagram mode.</p>
<p></p>

<dl>
<dt>Protocol:</dt>
<dd style="margin-left: 8">QUIC Tunnel</dd>
<dt>Identification Sequence:</dt>
<dd style="margin-left: 8">0x71 0x74 ("qt")</dd>
<dt>Specification:</dt>
<dd style="margin-left: 8">This document</dd>
</dl>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> <a href="#quic-tunnel-control-tlvs" id="quic-tunnel-control-tlvs">QUIC tunnel control TLVs</a>
</h1>
<p id="rfc.section.9.2.p.1">IANA is requested to create a new "QUIC tunnel control Parameters" registry.</p>
<p id="rfc.section.9.2.p.2">The following subsections detail new registries within "QUIC tunnel control Parameters" registry.</p>
<h1 id="rfc.section.9.2.1">
<a href="#rfc.section.9.2.1">9.2.1.</a> <a href="#quic-tunnel-control-tlvs-types" id="quic-tunnel-control-tlvs-types">QUIC tunnel control TLVs Types</a>
</h1>
<p id="rfc.section.9.2.1.p.1">IANA is request to create the "QUIC tunnel control TLVs Types" sub-registry. New values are assigned via IETF Review (Section 4.8 of <a href="#RFC8126" class="xref">[RFC8126]</a>).</p>
<p id="rfc.section.9.2.1.p.2">The initial values to be assigned at the creation of the registry are as follows:</p>
<pre>
+------+-----------------------+------------+
| Code | Name                  | Reference  |
+------+-----------------------+------------+
|    0 | Access Report TLV     | [This-Doc] |
+------+-----------------------+------------+
</pre>
<h1 id="rfc.section.9.3">
<a href="#rfc.section.9.3">9.3.</a> <a href="#quic-tunnel-access-report-signal-codes" id="quic-tunnel-access-report-signal-codes">QUIC tunnel Access Report Signal Codes</a>
</h1>
<p id="rfc.section.9.3.p.1">This document establishes a registry for QUIC tunnel Access Report Signal codes.  The "QUIC tunnel Access Report Signal Code" registry manages a 62-bit space.  New values are assigned via IETF Review (Section 4.8 of <a href="#RFC8126" class="xref">[RFC8126]</a>).</p>
<p id="rfc.section.9.3.p.2">The initial values to be assigned at the creation of the registry are as follows:</p>
<pre>
+------+-----------------------+------------+
| Code | Name                  | Reference  |
+------+-----------------------+------------+
|    1 | Access Available      | [This-Doc] |
|    2 | Access Unavailable    | [This-Doc] |
+------+-----------------------+------------+
</pre>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1701">[RFC1701]</b></td>
<td class="top">
<a>Hanks, S.</a>, <a>Li, T.</a>, <a>Farinacci, D.</a> and <a>P. Traina</a>, "<a href="https://tools.ietf.org/html/rfc1701">Generic Routing Encapsulation (GRE)</a>", RFC 1701, DOI 10.17487/RFC1701, October 1994.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8174">[RFC8174]</b></td>
<td class="top">
<a>Leiba, B.</a>, "<a href="https://tools.ietf.org/html/rfc8174">Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</a>", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017.</td>
</tr>
<tr>
<td class="reference"><b id="TS23501">[TS23501]</b></td>
<td class="top">
<a>3GPP (3rd Generation Partnership Project)</a>, "<a>Technical Specification Group Services and System Aspects; System Architecture for the 5G System; Stage 2 (Release 16)</a>", 3GPP TS23501, 2019.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-quic-tls">[I-D.ietf-quic-tls]</b></td>
<td class="top">
<a>Thomson, M.</a> and <a>S. Turner</a>, "<a href="https://tools.ietf.org/html/draft-ietf-quic-tls-32">Using TLS to Secure QUIC</a>", Internet-Draft draft-ietf-quic-tls-32, October 2020.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-quic-transport">[I-D.ietf-quic-transport]</b></td>
<td class="top">
<a>Iyengar, J.</a> and <a>M. Thomson</a>, "<a href="https://tools.ietf.org/html/draft-ietf-quic-transport-32">QUIC: A UDP-Based Multiplexed and Secure Transport</a>", Internet-Draft draft-ietf-quic-transport-32, October 2020.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.pauly-quic-datagram">[I-D.pauly-quic-datagram]</b></td>
<td class="top">
<a>Pauly, T.</a>, <a>Kinnear, E.</a> and <a>D. Schinazi</a>, "<a href="https://tools.ietf.org/html/draft-pauly-quic-datagram-05">An Unreliable Datagram Extension to QUIC</a>", Internet-Draft draft-pauly-quic-datagram-05, November 2019.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1812">[RFC1812]</b></td>
<td class="top">
<a>Baker, F.</a>, "<a href="https://tools.ietf.org/html/rfc1812">Requirements for IP Version 4 Routers</a>", RFC 1812, DOI 10.17487/RFC1812, June 1995.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2827">[RFC2827]</b></td>
<td class="top">
<a>Ferguson, P.</a> and <a>D. Senie</a>, "<a href="https://tools.ietf.org/html/rfc2827">Network Ingress Filtering: Defeating Denial of Service Attacks which employ IP Source Address Spoofing</a>", BCP 38, RFC 2827, DOI 10.17487/RFC2827, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6824">[RFC6824]</b></td>
<td class="top">
<a>Ford, A.</a>, <a>Raiciu, C.</a>, <a>Handley, M.</a> and <a>O. Bonaventure</a>, "<a href="https://tools.ietf.org/html/rfc6824">TCP Extensions for Multipath Operation with Multiple Addresses</a>", RFC 6824, DOI 10.17487/RFC6824, January 2013.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6887">[RFC6887]</b></td>
<td class="top">
<a>Wing, D.</a>, <a>Cheshire, S.</a>, <a>Boucadair, M.</a>, <a>Penno, R.</a> and <a>P. Selkirk</a>, "<a href="https://tools.ietf.org/html/rfc6887">Port Control Protocol (PCP)</a>", RFC 6887, DOI 10.17487/RFC6887, April 2013.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7301">[RFC7301]</b></td>
<td class="top">
<a>Friedl, S.</a>, <a>Popov, A.</a>, <a>Langley, A.</a> and <a>E. Stephan</a>, "<a href="https://tools.ietf.org/html/rfc7301">Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension</a>", RFC 7301, DOI 10.17487/RFC7301, July 2014.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8126">[RFC8126]</b></td>
<td class="top">
<a>Cotton, M.</a>, <a>Leiba, B.</a> and <a>T. Narten</a>, "<a href="https://tools.ietf.org/html/rfc8126">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 8126, DOI 10.17487/RFC8126, June 2017.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.A">
<a href="#rfc.appendix.A">Appendix A.</a> <a href="#change-log" id="change-log">Change Log</a>
</h1>
<h1 id="rfc.appendix.A.1">
<a href="#rfc.appendix.A.1">A.1.</a> <a href="#since-draft-piraux-quic-tunnel-03" id="since-draft-piraux-quic-tunnel-03">Since draft-piraux-quic-tunnel-03</a>
</h1>
<p></p>

<ul>
<li>Make the lightweight mode the default "tunnel mode"</li>
<li>Rename the datagram mode as tunnel session mode in draft-piraux-quic-tunnel-session</li>
</ul>
<h1 id="rfc.appendix.A.2">
<a href="#rfc.appendix.A.2">A.2.</a> <a href="#since-draft-piraux-quic-tunnel-02" id="since-draft-piraux-quic-tunnel-02">Since draft-piraux-quic-tunnel-02</a>
</h1>
<p></p>

<ul><li>Add the lightweight mode</li></ul>
<h1 id="rfc.appendix.A.3">
<a href="#rfc.appendix.A.3">A.3.</a> <a href="#since-draft-piraux-quic-tunnel-01" id="since-draft-piraux-quic-tunnel-01">Since draft-piraux-quic-tunnel-01</a>
</h1>
<p></p>

<ul>
<li>Add the Access Report TLV for reporting access networks availability</li>
<li>Add a section with examples of use of the Packet Tag</li>
</ul>
<h1 id="rfc.appendix.A.4">
<a href="#rfc.appendix.A.4">A.4.</a> <a href="#since-draft-piraux-quic-tunnel-00" id="since-draft-piraux-quic-tunnel-00">Since draft-piraux-quic-tunnel-00</a>
</h1>
<p></p>

<ul>
<li>Separate the document in two and put the stream mode in another document</li>
<li>Remove TCP Extended TLV</li>
<li>Add a mechanism for joining QUIC connections in a QUIC tunneling session</li>
<li>Add a format for encoding any network-layer protocol packets and Ethernet frames in QUIC DATAGRAM frames</li>
</ul>
<h1 id="rfc.acknowledgments"><a href="#rfc.acknowledgments">Acknowledgments</a></h1>
<p id="rfc.section.B.p.1">Thanks to Quentin De Coninck and Francois Michel for their comments and the proofreading of the first version of this document.  Thanks to Gregory Vander Schueren for his comments on the first version of this document.  Thanks to Florin Baboescu for his comments on the fifth version of this document.</p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Maxime Piraux</span> 
	  <span class="n hidden">
		<span class="family-name">Piraux</span>
	  </span>
	</span>
	<span class="org vcardline">UCLouvain</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:maxime.piraux@uclouvain.be">maxime.piraux@uclouvain.be</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Olivier Bonaventure</span> 
	  <span class="n hidden">
		<span class="family-name">Bonaventure</span>
	  </span>
	</span>
	<span class="org vcardline">UCLouvain</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:olivier.bonaventure@uclouvain.be">olivier.bonaventure@uclouvain.be</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Adi Masputra</span> 
	  <span class="n hidden">
		<span class="family-name">Masputra</span>
	  </span>
	</span>
	<span class="org vcardline">Apple Inc.</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:adi@apple.com">adi@apple.com</a></span>

  </address>
</div>

</body>
</html>

